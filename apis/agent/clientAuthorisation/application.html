<!DOCTYPE HTML><html><head><title>Agent Client Authorisation API documentation</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="https://github.com/raml2html/raml2html 6.2.0"><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css"><script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script><script type="text/javascript" src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script><script type="text/javascript">
      $(document).ready(function() {
        $('.page-header pre code, .top-resource-description pre code, .modal-body pre code').each(function(i, block) {
          hljs.highlightBlock(block);
        });

        $('[data-toggle]').click(function() {
          var selector = $(this).data('target') + ' pre code';
          $(selector).each(function(i, block) {
            hljs.highlightBlock(block);
          });
        });

        // open modal on hashes like #_action_get
        $(window).bind('hashchange', function(e) {
          var anchor_id = document.location.hash.substr(1); //strip #
          var element = $('#' + anchor_id);

          // do we have such element + is it a modal?  --> show it
          if (element.length && element.hasClass('modal')) {
            element.modal('show');
          }
        });

        // execute hashchange on first page load
        $(window).trigger('hashchange');

        // remove url fragment on modal hide
        $('.modal').on('hidden.bs.modal', function() {
          try {
            if (history && history.replaceState) {
                history.replaceState({}, '', '#');
            }
          } catch(e) {}
        });
      });
    </script><style>
      .hljs {
        background: transparent;
      }
      .parent {
        color: #999;
      }
      .list-group-item > .badge {
        float: none;
        margin-right: 6px;
      }
      .panel-title > .methods {
        float: right;
      }
      .badge {
        border-radius: 0;
        text-transform: uppercase;
        width: 70px;
        font-weight: normal;
        color: #f3f3f6;
        line-height: normal;
      }
      .badge_get {
        background-color: #63a8e2;
      }
      .badge_post {
        background-color: #6cbd7d;
      }
      .badge_put {
        background-color: #22bac4;
      }
      .badge_delete {
        background-color: #d26460;
      }
      .badge_patch {
        background-color: #ccc444;
      }
      .list-group, .panel-group {
        margin-bottom: 0;
      }
      .panel-group .panel+.panel-white {
        margin-top: 0;
      }
      .panel-group .panel-white {
        border-bottom: 1px solid #F5F5F5;
        border-radius: 0;
      }
      .panel-white:last-child {
        border-bottom-color: white;
        -webkit-box-shadow: none;
        box-shadow: none;
      }
      .panel-white .panel-heading {
        background: white;
      }
      .tab-pane ul {
        padding-left: 2em;
      }
      .tab-pane h1 {
        font-size: 1.3em;
      }
      .tab-pane h2 {
        font-size: 1.2em;
        padding-bottom: 4px;
        border-bottom: 1px solid #ddd;
      }
      .tab-pane h3 {
        font-size: 1.1em;
      }
      .tab-content {
        border-left: 1px solid #ddd;
        border-right: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        padding: 10px;
      }
      #sidebar {
        margin-top: 30px;
        padding-right: 5px;
        overflow: auto;
        height: 90%;
      }
      .top-resource-description {
        border-bottom: 1px solid #ddd;
        background: #fcfcfc;
        padding: 15px 15px 0 15px;
        margin: -15px -15px 10px -15px;
      }
      .resource-description {
        border-bottom: 1px solid #fcfcfc;
        background: #fcfcfc;
        padding: 15px 15px 0 15px;
        margin: -15px -15px 10px -15px;
      }
      .resource-description p:last-child {
        margin: 0;
      }
      .list-group .badge {
        float: left;
      }
      .method_description {
        margin-left: 85px;
      }
      .method_description p:last-child {
        margin: 0;
      }
      .list-group-item {
        cursor: pointer;
      }
      .list-group-item:hover {
        background-color: #f5f5f5;
      }
      pre code {
        overflow: auto;
        word-wrap: normal;
        white-space: pre;
      }
      .items {
        background: #f5f5f5;
        color: #333;
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 9.5px;
        margin: 0 0 10px;
        font-size: 13px;
        line-height: 1.42857143;
      }
      .examples {
        margin-left: 0.5em;
      }
      .resource-modal li > ul {
        margin-bottom: 1em;
      }
    </style></head><body data-spy="scroll" data-target="#sidebar"><div class="container"><div class="row"><div class="col-md-9" role="main"><div class="page-header"><h1>Agent Client Authorisation API documentation <small>version 0.0</small></h1><p>https://api.service.hmrc.gov.uk/</p><h3 id="overview"><a href="#overview">Overview</a></h3><p>An API for agents and clients akin to the paper 64-8 form.</p><p>The production version of this API is not yet available, only the test version which should be accessed using your test credentials. Breaking changes are expected before this API is finalised.</p><h3 id="versioning"><a href="#versioning">Versioning</a></h3><p>Specific versions are requested by providing an Accept header. When backwards-incompatible API changes are made, a new version will be released. Backwards-compatible changes are released in the current version without the need to change your Accept header. See our <a href="/api-documentation/docs/reference-guide#versioning">reference guide</a> for more on versioning.</p><h3 id="errors"><a href="#errors">Errors</a></h3><p>HMRC uses standard <a href="/api-documentation/docs/reference-guide#http-status-codes">HTTP status codes</a> to indicate the success or failure of an API request. In general, status codes in the 2xx range indicate success. Status codes in the 4xx range indicate a client error, and have a consistently formed JSON response body. Codes in the 5xx range indicate errors on the HMRC server. API-specific errors are shown in the relevant resource&#39;s response detail. See our <a href="/api-documentation/docs/reference-guide#errors">reference guide</a> for more on errors.</p></div><div class="panel panel-default"><div class="panel-heading"><h3 id="agent_client_authorisation_agencies__arn__invitations_sent" class="panel-title">/agent-client-authorisation/agencies/{arn}/invitations/sent</h3></div><div class="panel-body"><div class="panel-group"><div class="panel panel-white resource-modal"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_agent_client_authorisation_agencies__arn__invitations_sent"><span class="parent"></span>/agent-client-authorisation/agencies/{arn}/invitations/sent</a> <span class="methods"><a href="#agent_client_authorisation_agencies__arn__invitations_sent_get"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a> <a href="#agent_client_authorisation_agencies__arn__invitations_sent_post"><span class="badge badge_post">post <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a></span></h4></div><div id="panel_agent_client_authorisation_agencies__arn__invitations_sent" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#agent_client_authorisation_agencies__arn__invitations_sent_get'" class="list-group-item"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Retrieves a list of invitations sent by the agency.</p></div><div class="clearfix"></div></div><div onclick="window.location.href = '#agent_client_authorisation_agencies__arn__invitations_sent_post'" class="list-group-item"><span class="badge badge_post">post <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="agent_client_authorisation_agencies__arn__invitations_sent_get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent"></span>/agent-client-authorisation/agencies/{arn}/invitations/sent</h4></div><div class="modal-body"><div class="alert alert-info"><p>Retrieves a list of invitations sent by the agency.</p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>read:sent-invitations</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#agent_client_authorisation_agencies__arn__invitations_sent_get_request" data-toggle="tab">Request</a></li><li><a href="#agent_client_authorisation_agencies__arn__invitations_sent_get_response" data-toggle="tab">Response</a></li><li><a href="#agent_client_authorisation_agencies__arn__invitations_sent_get_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="agent_client_authorisation_agencies__arn__invitations_sent_get_request"><h3>URI Parameters</h3><ul><li><strong>arn</strong>: <em>required (string)</em><p>The MTD platform Agent Registration Number.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>AARN9999999</code></pre></div></li></ul><h3>Annotations</h3><ul><li><strong>annotations.scope</strong>:<pre><code>"read:sent-invitations"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li></ul><h3>Query Parameters</h3><ul><li><strong>status</strong>: <em>(one of Pending, Accepted, Rejected, Cancelled)</em><p>Filter invitations by status. If multiple &#39;status&#39; filtering parameters are supplied then only the first is considered.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>Pending</code></pre></div></li><li><strong>clientId</strong>: <em>(string)</em><p>Client&#39;s top level ID for their MTD registration (not regime specific).</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>client123</code></pre></div></li><li><strong>regime</strong>: <em>(mtd-sa)</em><p>The tax regime.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>mtd-sa</code></pre></div></li></ul></div><div class="tab-pane" id="agent_client_authorisation_agencies__arn__invitations_sent_get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>:</p><pre><code>{
  "type": "object",
  "properties": {
    "_links": {
      "type": "object",
      "description": "Related resources",
      "properties": {
        "self": {
          "type": "object",
          "description": "A link to the current resource",
          "properties": {
            "href": {
              "type": "string"
            }
          },
          "required": [
            "href"
          ]
        },
        "invitations": {
          "type": "array",
          "items": {
            "type": "object",
            "description": "An array of links to individual Invitation resources",
            "properties": {
              "href": {
                "type": "string"
              }
            },
            "required": [
              "href"
            ]
          }
        }
      },
      "required": [
        "self",
        "invitations"
      ]
    },
    "_embedded": {
      "type": "object",
      "properties": {
        "invitations": {
          "type": "array",
          "items": {
            "$ref": "invitation.json"
          }
        }
      },
      "required": [
        "invitations"
      ]
    }
  },
  "required": [
    "_links",
    "_embedded"
  ]
}</code></pre><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "_links": {
    "self": {
      "href": "/agent-client-authorisation/agencies/AARN9999999/invitations/sent"
    },
    "invitations": [
      {
        "href": "/agent-client-authorisation/agencies/AARN9999999/invitations/sent/5888c22e11000011007afc11"
      },
      {
        "href": "/agent-client-authorisation/agencies/AARN9999999/invitations/sent/5888c22e11000011007afc12"
      }
    ]
  },
  "_embedded": {
    "invitations": [
      {
        "_links": {
          "cancel": {
            "href": "/agent-client-authorisation/agencies/AARN9999999/invitations/sent/5888c22e11000011007afc11/cancel"
          },
          "self": {
            "href": "/agent-client-authorisation/agencies/AARN9999999/invitations/sent/5888c22e11000011007afc11"
          }
        },
        "regime": "mtd-sa",
        "clientId": "client123",
        "postcode": "A11 1AA",
        "arn": "AARN9999999",
        "created": "2017-01-25T15:20:14.917Z",
        "lastUpdated": "2017-01-25T15:20:14.917Z",
        "status": "Pending"
      },
      {
        "_links": {
          "cancel": {
            "href": "/agent-client-authorisation/agencies/AARN9999999/invitations/sent/5888c22e11000011007afc12/cancel"
          },
          "self": {
            "href": "/agent-client-authorisation/agencies/AARN9999999/invitations/sent/5888c22e11000011007afc12"
          }
        },
        "regime": "mtd-sa",
        "clientId": "client234",
        "postcode": "A22 2AA",
        "arn": "AARN9999999",
        "created": "2017-01-26T15:20:14.927Z",
        "lastUpdated": "2017-01-26T15:20:14.927Z",
        "status": "Pending"
      }
    ]
  }
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invalidCredentials</strong>:<br>Invalid Authentication information provided.</p><pre><code>{
  "code": "INVALID_CREDENTIALS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Examples</strong>:</p><div class="examples"><p><strong>notAnAgent</strong>:<br>The logged in user is not an agent.</p><pre><code>{
  "code": "NOT_AN_AGENT"
}</code></pre><p><strong>agentRegistrationNotFound</strong>:<br>The Agent's MTDfB registration was not found.</p><pre><code>{
  "code": "AGENT_REGISTRATION_NOT_FOUND"
}</code></pre><p><strong>noPermissionOnAgency</strong>:<br>The logged in user is not permitted to access invitations for the specified agency.</p><pre><code>{
  "code": "NO_PERMISSION_ON_AGENCY"
}</code></pre></div></div><div class="tab-pane" id="agent_client_authorisation_agencies__arn__invitations_sent_get_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul></div></div></div></div></div></div><div class="modal fade" tabindex="0" id="agent_client_authorisation_agencies__arn__invitations_sent_post"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_post">post <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent"></span>/agent-client-authorisation/agencies/{arn}/invitations/sent</h4></div><div class="modal-body"><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>write:sent-invitations</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#agent_client_authorisation_agencies__arn__invitations_sent_post_request" data-toggle="tab">Request</a></li><li><a href="#agent_client_authorisation_agencies__arn__invitations_sent_post_response" data-toggle="tab">Response</a></li><li><a href="#agent_client_authorisation_agencies__arn__invitations_sent_post_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="agent_client_authorisation_agencies__arn__invitations_sent_post_request"><h3>URI Parameters</h3><ul><li><strong>arn</strong>: <em>required (string)</em><p>The MTD platform Agent Registration Number.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>AARN9999999</code></pre></div></li></ul><h3>Annotations</h3><ul><li><strong>annotations.scope</strong>:<pre><code>"write:sent-invitations"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li></ul><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>:</p><pre><code>{
  "type": "object",
  "description": "Creates a new invitation between the agency and client",
  "properties": {
    "regime": {
      "$ref": "regime.json"
    },
    "clientId": {
      "type": "string",
      "description" : "Client&#39;s top level ID for their MTD registration (not regime specific)"
    },
    "postcode": {
      "type": "string",
      "description" : "The Client&#39;s post code"
    }
  },
  "required": [
    "regime",
    "clientId",
    "postcode"
  ]
}</code></pre><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "regime": "mtd-sa",
  "clientId": "client123",
  "postcode": "A11 1AA"
}
</code></pre></div></div><div class="tab-pane" id="agent_client_authorisation_agencies__arn__invitations_sent_post_response"><h2>HTTP status code <a href="http://httpstatus.es/201" target="_blank">201</a></h2><p>The invitation was successfully created.</p><h3>Headers</h3><ul><li><strong>Location</strong>: <em>required (string)</em><p>Location of the invitation that was created.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>/agencies/AARN9999999/invitations/sent/5888c22e11000011007afc11</code></pre></div></li></ul><h2>HTTP status code <a href="http://httpstatus.es/400" target="_blank">400</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invalidPostcode</strong>:<br>The submitted postcode does not match the expected format.</p><pre><code>{
  "code": "POSTCODE_FORMAT_INVALID"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invalidCredentials</strong>:<br>Invalid Authentication information provided.</p><pre><code>{
  "code": "INVALID_CREDENTIALS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Examples</strong>:</p><div class="examples"><p><strong>postcodeDoesNotMatch</strong>:<br>The submitted postcode did not match the client's postcode as held by HMRC.</p><pre><code>{
  "code": "POSTCODE_DOES_NOT_MATCH"
}</code></pre><p><strong>clientRegistrationNotFound</strong>:<br>The Client's MTDfB registration was not found.</p><pre><code>{
  "code": "CLIENT_REGISTRATION_NOT_FOUND"
}</code></pre><p><strong>notAnAgent</strong>:<br>The logged in user is not an agent.</p><pre><code>{
  "code": "NOT_AN_AGENT"
}</code></pre><p><strong>agentRegistrationNotFound</strong>:<br>The Agent's MTDfB registration was not found.</p><pre><code>{
  "code": "AGENT_REGISTRATION_NOT_FOUND"
}</code></pre><p><strong>noPermissionOnAgency</strong>:<br>The logged in user is not permitted to access invitations for the specified agency.</p><pre><code>{
  "code": "NO_PERMISSION_ON_AGENCY"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/501" target="_blank">501</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>postcodeDoesNotMatch</strong>:<br>The submitted regime is not currently supported by this API.</p><pre><code>{
  "code": "UNSUPPORTED_REGIME"
}</code></pre></div></div><div class="tab-pane" id="agent_client_authorisation_agencies__arn__invitations_sent_post_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul></div></div></div></div></div></div></div><div class="panel panel-white resource-modal"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_agent_client_authorisation_agencies__arn__invitations_sent__invitationid_"><span class="parent">/agent-client-authorisation/agencies/{arn}/invitations/sent</span>/{invitationId}</a> <span class="methods"><a href="#agent_client_authorisation_agencies__arn__invitations_sent__invitationid__get"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a></span></h4></div><div id="panel_agent_client_authorisation_agencies__arn__invitations_sent__invitationid_" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#agent_client_authorisation_agencies__arn__invitations_sent__invitationid__get'" class="list-group-item"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Retrieve a sent invitation.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="agent_client_authorisation_agencies__arn__invitations_sent__invitationid__get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent">/agent-client-authorisation/agencies/{arn}/invitations/sent</span>/{invitationId}</h4></div><div class="modal-body"><div class="alert alert-info"><p>Retrieve a sent invitation.</p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>read:sent-invitations</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#agent_client_authorisation_agencies__arn__invitations_sent__invitationid__get_request" data-toggle="tab">Request</a></li><li><a href="#agent_client_authorisation_agencies__arn__invitations_sent__invitationid__get_response" data-toggle="tab">Response</a></li><li><a href="#agent_client_authorisation_agencies__arn__invitations_sent__invitationid__get_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="agent_client_authorisation_agencies__arn__invitations_sent__invitationid__get_request"><h3>URI Parameters</h3><ul><li><strong>arn</strong>: <em>required (string)</em><p>The MTD platform Agent Registration Number.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>AARN9999999</code></pre></div></li><li><strong>invitationId</strong>: <em>required (string)</em><p>A unique invitation id</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>5888c22e11000011007afc11</code></pre></div></li></ul><h3>Annotations</h3><ul><li><strong>annotations.scope</strong>:<pre><code>"read:sent-invitations"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li></ul></div><div class="tab-pane" id="agent_client_authorisation_agencies__arn__invitations_sent__invitationid__get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>:</p><pre><code>{
  "type": "object",
  "properties": {
    "_links": {
      "type": "object",
      "properties": {
        "reject": {
          "type": "object",
          "description": "Link to reject the invitation. Only provided to clients.",
          "properties": {
            "href": {
              "type": "string"            }
          },
          "required": [
            "href"
          ]
        },
        "accept": {
          "type": "object",
          "description": "Link to accept the invitation. Only provided to clients.",
          "properties": {
            "href": {
              "type": "string"
            }
          },
          "required": [
            "href"
          ]
        },
        "cancel": {
          "type": "object",
          "description": "A link to cancel to this invitation. Only provided to agents.",
          "properties": {
            "href": {
              "type": "string"
            }
          },
          "required": [
            "href"
          ]
        },
        "self": {
          "type": "object",
          "description": "A link to the current resource",
          "properties": {
            "href": {
              "type": "string"
            }
          },
          "required": [
            "href"
          ]
        }
      },
      "required": [
        "self"
      ]
    },
    "regime": {
      "$ref": "regime.json"
    },
    "clientId": {
      "type": "string",
      "description": "Client&#39;s top level ID for their MTD registration (not regime specific)"
    },
    "postcode": {
      "type": "string",
      "description": "The Client&#39;s post code"
    },
    "arn": {
      "type": "string",
      "description": "The Agent Registration Number for the calling agency"
    },
    "created": {
      "type": "string",
      "description": "Creation time of the request (RFC3339 / ISO8601 format)"
    },
    "lastUpdated": {
      "type": "string",
      "description": "Last update time of the request (RFC3339 / ISO8601 format)"
    },
    "status": {
      "type": "string",
      "description" : "The current status of the invitation",
      "oneOf": [
        {
          "enum": [ "Pending" ],
          "description": "The invitation has been created, it has not been accepted or rejected by the client. Only the service can set this status"
        },
        {
          "enum": [ "Accepted" ],
          "description": "The client has accepted the invitation. Only the client can set this status"
        },
        {
          "enum": [ "Rejected" ],
          "description": "The client has rejected the invitation. Only the client can set this status"
        },
        {
          "enum": [ "Cancelled" ],
          "description": "The agency has cancelled the invitation. Only the agency can set this status"
        }
      ]
    }
  },
  "required": [
    "_links",
    "regime",
    "clientId",
    "postcode",
    "arn",
    "created",
    "lastUpdated",
    "status"
  ]
}</code></pre><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "_links": {
    "self": {
      "href": "/agencies/AARN9999999/invitations/sent/5888c22e11000011007afc11"
    },
    "cancel": {
      "href": "/agencies/AARN9999999/invitations/sent/5888c22e11000011007afc11"
    }
  },
  "created": "2017-01-25T15:20:14.917Z",
  "lastUpdated": "2017-01-25T15:20:14.917Z",
  "arn": "AARN9999999",
  "regime": "mtd-sa",
  "clientId": "client123",
  "postcode": "A11 1AA",
  "status": "Pending"
}
</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>The agent must be authenticated and authorised (logged-in) to use this resource</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invalidCredentials</strong>:<br>Invalid Authentication information provided.</p><pre><code>{
  "code": "INVALID_CREDENTIALS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>The agent is not permitted to see this invitation.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Examples</strong>:</p><div class="examples"><p><strong>notAnAgent</strong>:<br>The logged in user is not an agent.</p><pre><code>{
  "code": "NOT_AN_AGENT"
}</code></pre><p><strong>agentRegistrationNotFound</strong>:<br>The Agent's MTDfB registration was not found.</p><pre><code>{
  "code": "AGENT_REGISTRATION_NOT_FOUND"
}</code></pre><p><strong>noPermissionOnAgency</strong>:<br>The logged in user is not permitted to access invitations for the specified agency.</p><pre><code>{
  "code": "NO_PERMISSION_ON_AGENCY"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/404" target="_blank">404</a></h2><p>The invitation with the specified id does not exist.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invitationNotFound</strong>:<br>The specified invitation was not found.</p><pre><code>{
  "code": "INVITATION_NOT_FOUND"
}</code></pre></div></div><div class="tab-pane" id="agent_client_authorisation_agencies__arn__invitations_sent__invitationid__get_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul></div></div></div></div></div></div></div><div class="panel panel-white resource-modal"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel"><span class="parent">/agent-client-authorisation/agencies/{arn}/invitations/sent/{invitationId}</span>/cancel</a> <span class="methods"><a href="#agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel_put"><span class="badge badge_put">put <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a></span></h4></div><div id="panel_agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel_put'" class="list-group-item"><span class="badge badge_put">put <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Cancel an invitation.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel_put"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_put">put <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent">/agent-client-authorisation/agencies/{arn}/invitations/sent/{invitationId}</span>/cancel</h4></div><div class="modal-body"><div class="alert alert-info"><p>Cancel an invitation.</p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>write:sent-invitations</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel_put_request" data-toggle="tab">Request</a></li><li><a href="#agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel_put_response" data-toggle="tab">Response</a></li><li><a href="#agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel_put_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel_put_request"><h3>URI Parameters</h3><ul><li><strong>arn</strong>: <em>required (string)</em><p>The MTD platform Agent Registration Number.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>AARN9999999</code></pre></div></li><li><strong>invitationId</strong>: <em>required (string)</em><p>A unique invitation id</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>5888c22e11000011007afc11</code></pre></div></li></ul><h3>Annotations</h3><ul><li><strong>annotations.scope</strong>:<pre><code>"write:sent-invitations"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li></ul></div><div class="tab-pane" id="agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel_put_response"><h2>HTTP status code <a href="http://httpstatus.es/204" target="_blank">204</a></h2><p>Invitation has been cancelled.</p><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>The agent must be authenticated and authorised (logged-in) to use this resource</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invalidCredentials</strong>:<br>Invalid Authentication information provided.</p><pre><code>{
  "code": "INVALID_CREDENTIALS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>The agent is not permitted to cancel this invitation, for example because it has already been accepted or rejected.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Examples</strong>:</p><div class="examples"><p><strong>notAnAgent</strong>:<br>The logged in user is not an agent.</p><pre><code>{
  "code": "NOT_AN_AGENT"
}</code></pre><p><strong>agentRegistrationNotFound</strong>:<br>The Agent's MTDfB registration was not found.</p><pre><code>{
  "code": "AGENT_REGISTRATION_NOT_FOUND"
}</code></pre><p><strong>noPermissionOnAgency</strong>:<br>The logged in user is not permitted to access invitations for the specified agency.</p><pre><code>{
  "code": "NO_PERMISSION_ON_AGENCY"
}</code></pre><p><strong>invalidInvitationStatus</strong>:<br>The requested state transition is not permitted given the invitation's current status.</p><pre><code>{
  "code": "INVALID_INVITATION_STATUS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/404" target="_blank">404</a></h2><p>The invitation with the specified id does not exist.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invitationNotFound</strong>:<br>The specified invitation was not found.</p><pre><code>{
  "code": "INVITATION_NOT_FOUND"
}</code></pre></div></div><div class="tab-pane" id="agent_client_authorisation_agencies__arn__invitations_sent__invitationid__cancel_put_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul></div></div></div></div></div></div></div></div></div></div><div class="panel panel-default"><div class="panel-heading"><h3 id="agent_client_authorisation_clients__clientid__invitations_received" class="panel-title">/agent-client-authorisation/clients/{clientId}/invitations/received</h3></div><div class="panel-body"><div class="panel-group"><div class="panel panel-white resource-modal"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_agent_client_authorisation_clients__clientid__invitations_received"><span class="parent"></span>/agent-client-authorisation/clients/{clientId}/invitations/received</a> <span class="methods"><a href="#agent_client_authorisation_clients__clientid__invitations_received_get"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a></span></h4></div><div id="panel_agent_client_authorisation_clients__clientid__invitations_received" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#agent_client_authorisation_clients__clientid__invitations_received_get'" class="list-group-item"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Retrieves a list of invitations received by a client</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="agent_client_authorisation_clients__clientid__invitations_received_get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent"></span>/agent-client-authorisation/clients/{clientId}/invitations/received</h4></div><div class="modal-body"><div class="alert alert-info"><p>Retrieves a list of invitations received by a client</p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>read:received-invitations</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#agent_client_authorisation_clients__clientid__invitations_received_get_request" data-toggle="tab">Request</a></li><li><a href="#agent_client_authorisation_clients__clientid__invitations_received_get_response" data-toggle="tab">Response</a></li><li><a href="#agent_client_authorisation_clients__clientid__invitations_received_get_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="agent_client_authorisation_clients__clientid__invitations_received_get_request"><h3>URI Parameters</h3><ul><li><strong>clientId</strong>: <em>required (string)</em><p>Client&#39;s top level ID for their MTD registration (not regime specific).</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>client123</code></pre></div></li></ul><h3>Annotations</h3><ul><li><strong>annotations.scope</strong>:<pre><code>"read:received-invitations"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li></ul><h3>Query Parameters</h3><ul><li><strong>status</strong>: <em>(one of Pending, Accepted, Rejected, Cancelled)</em><p>filter invitations by status. If multiple &#39;status&#39; filtering parameters are supplied then only the first is considered.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>Pending</code></pre></div></li></ul></div><div class="tab-pane" id="agent_client_authorisation_clients__clientid__invitations_received_get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>:</p><pre><code>{
  "type": "object",
  "properties": {
    "_links": {
      "type": "object",
      "description": "Related resources",
      "properties": {
        "self": {
          "type": "object",
          "description": "A link to the current resource",
          "properties": {
            "href": {
              "type": "string"
            }
          },
          "required": [
            "href"
          ]
        },
        "invitations": {
          "type": "array",
          "items": {
            "type": "object",
            "description": "An array of links to individual Invitation resources",
            "properties": {
              "href": {
                "type": "string"
              }
            },
            "required": [
              "href"
            ]
          }
        }
      },
      "required": [
        "self",
        "invitations"
      ]
    },
    "_embedded": {
      "type": "object",
      "properties": {
        "invitations": {
          "type": "array",
          "items": {
            "$ref": "invitation.json"
          }
        }
      },
      "required": [
        "invitations"
      ]
    }
  },
  "required": [
    "_links",
    "_embedded"
  ]
}</code></pre><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "_links": {
    "self": {
      "href": "/agent-client-authorisation/clients/client123/invitations/received"
    },
    "invitations": [
      {
        "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f19c5200005200ed1efc"
      },
      {
        "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f19c5200005200ed1efd"
      }
    ]
  },
  "_embedded": {
    "invitations": [
      {
        "_links": {
          "reject": {
            "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f19c5200005200ed1efc/reject"
          },
          "accept": {
            "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f19c5200005200ed1efc/accept"
          },
          "self": {
            "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f19c5200005200ed1efc"
          }
        },
        "regime": "mtd-sa",
        "clientId": "client123",
        "postcode": "A11 1AA",
        "arn": "AARN9999999",
        "created": "2017-01-25T12:54:52.712Z",
        "lastUpdated": "2017-01-25T12:54:52.712Z",
        "status": "Pending"
      },
      {
        "_links": {
          "reject": {
            "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f19c5200005200ed1efd/reject"
          },
          "accept": {
            "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f19c5200005200ed1efd/accept"
          },
          "self": {
            "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f19c5200005200ed1efd"
          }
        },
        "regime": "mtd-sa",
        "clientId": "client123",
        "postcode": "A11 1AA",
        "arn": "AARN9999999",
        "created": "2017-01-26T12:54:52.712Z",
        "lastUpdated": "2017-01-26T12:54:52.712Z",
        "status": "Pending"
      }
    ]
  }
}
</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>The client must be authenticated and authorised (logged-in) to use this resource</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invalidCredentials</strong>:<br>Invalid Authentication information provided.</p><pre><code>{
  "code": "INVALID_CREDENTIALS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>The client is not permitted to see these invitations.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Examples</strong>:</p><div class="examples"><p><strong>saEnrolmentNotFound</strong>:<br>The Client must have an active IR-SA enrolment.</p><pre><code>{
  "code": "SA_ENROLMENT_NOT_FOUND"
}</code></pre><p><strong>clientRegistrationNotFound</strong>:<br>The Client's MTDfB registration was not found.</p><pre><code>{
  "code": "CLIENT_REGISTRATION_NOT_FOUND"
}</code></pre><p><strong>noPermissionOnArn</strong>:<br>The logged in user is not permitted to see the invitations for the specified client.</p><pre><code>{
  "code": "NO_PERMISSION_ON_CLIENT"
}</code></pre></div></div><div class="tab-pane" id="agent_client_authorisation_clients__clientid__invitations_received_get_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul></div></div></div></div></div></div></div><div class="panel panel-white resource-modal"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_agent_client_authorisation_clients__clientid__invitations_received__invitationid_"><span class="parent">/agent-client-authorisation/clients/{clientId}/invitations/received</span>/{invitationId}</a> <span class="methods"><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__get"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a></span></h4></div><div id="panel_agent_client_authorisation_clients__clientid__invitations_received__invitationid_" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#agent_client_authorisation_clients__clientid__invitations_received__invitationid__get'" class="list-group-item"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Retrieve a received invitation.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__get"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_get">get <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent">/agent-client-authorisation/clients/{clientId}/invitations/received</span>/{invitationId}</h4></div><div class="modal-body"><div class="alert alert-info"><p>Retrieve a received invitation.</p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>read:received-invitations</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__get_request" data-toggle="tab">Request</a></li><li><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__get_response" data-toggle="tab">Response</a></li><li><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__get_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__get_request"><h3>URI Parameters</h3><ul><li><strong>clientId</strong>: <em>required (string)</em><p>Client&#39;s top level ID for their MTD registration (not regime specific).</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>client123</code></pre></div></li><li><strong>invitationId</strong>: <em>required (string)</em><p>The id of the invitation.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>5888c22e11000011007afc11</code></pre></div></li></ul><h3>Annotations</h3><ul><li><strong>annotations.scope</strong>:<pre><code>"read:received-invitations"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li></ul></div><div class="tab-pane" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__get_response"><h2>HTTP status code <a href="http://httpstatus.es/200" target="_blank">200</a></h2><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>:</p><pre><code>{
  "type": "object",
  "properties": {
    "_links": {
      "type": "object",
      "properties": {
        "reject": {
          "type": "object",
          "description": "Link to reject the invitation. Only provided to clients.",
          "properties": {
            "href": {
              "type": "string"            }
          },
          "required": [
            "href"
          ]
        },
        "accept": {
          "type": "object",
          "description": "Link to accept the invitation. Only provided to clients.",
          "properties": {
            "href": {
              "type": "string"
            }
          },
          "required": [
            "href"
          ]
        },
        "cancel": {
          "type": "object",
          "description": "A link to cancel to this invitation. Only provided to agents.",
          "properties": {
            "href": {
              "type": "string"
            }
          },
          "required": [
            "href"
          ]
        },
        "self": {
          "type": "object",
          "description": "A link to the current resource",
          "properties": {
            "href": {
              "type": "string"
            }
          },
          "required": [
            "href"
          ]
        }
      },
      "required": [
        "self"
      ]
    },
    "regime": {
      "$ref": "regime.json"
    },
    "clientId": {
      "type": "string",
      "description": "Client&#39;s top level ID for their MTD registration (not regime specific)"
    },
    "postcode": {
      "type": "string",
      "description": "The Client&#39;s post code"
    },
    "arn": {
      "type": "string",
      "description": "The Agent Registration Number for the calling agency"
    },
    "created": {
      "type": "string",
      "description": "Creation time of the request (RFC3339 / ISO8601 format)"
    },
    "lastUpdated": {
      "type": "string",
      "description": "Last update time of the request (RFC3339 / ISO8601 format)"
    },
    "status": {
      "type": "string",
      "description" : "The current status of the invitation",
      "oneOf": [
        {
          "enum": [ "Pending" ],
          "description": "The invitation has been created, it has not been accepted or rejected by the client. Only the service can set this status"
        },
        {
          "enum": [ "Accepted" ],
          "description": "The client has accepted the invitation. Only the client can set this status"
        },
        {
          "enum": [ "Rejected" ],
          "description": "The client has rejected the invitation. Only the client can set this status"
        },
        {
          "enum": [ "Cancelled" ],
          "description": "The agency has cancelled the invitation. Only the agency can set this status"
        }
      ]
    }
  },
  "required": [
    "_links",
    "regime",
    "clientId",
    "postcode",
    "arn",
    "created",
    "lastUpdated",
    "status"
  ]
}</code></pre><p><strong>Example</strong>:</p><div class="examples"><pre><code>{
  "_links": {
    "reject": {
      "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f1cc5200001200ed1efe/reject"
    },
    "accept": {
      "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f1cc5200001200ed1efe/accept"
    },
    "self": {
      "href": "/agent-client-authorisation/clients/client123/invitations/received/5889f1cc5200001200ed1efe"
    }
  },
  "created": "2017-01-25T12:54:52.712Z",
  "lastUpdated": "2017-01-25T12:54:52.712Z",
  "arn": "AARN9999999",
  "regime": "mtd-sa",
  "clientId": "client123",
  "postcode": "A11 1AA",
  "status": "Pending"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>The client must be authenticated and authorised (logged-in) to use this resource</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invalidCredentials</strong>:<br>Invalid Authentication information provided.</p><pre><code>{
  "code": "INVALID_CREDENTIALS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>The client is not permitted to reject this invitation, for example because it has already been accepted, rejected or cancelled.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Examples</strong>:</p><div class="examples"><p><strong>saEnrolmentNotFound</strong>:<br>The Client must have an active IR-SA enrolment.</p><pre><code>{
  "code": "SA_ENROLMENT_NOT_FOUND"
}</code></pre><p><strong>clientRegistrationNotFound</strong>:<br>The Client's MTDfB registration was not found.</p><pre><code>{
  "code": "CLIENT_REGISTRATION_NOT_FOUND"
}</code></pre><p><strong>noPermissionOnArn</strong>:<br>The logged in user is not permitted to see the invitations for the specified client.</p><pre><code>{
  "code": "NO_PERMISSION_ON_CLIENT"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/404" target="_blank">404</a></h2><p>The invitation with the specified id does not exist.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invitationNotFound</strong>:<br>The specified invitation was not found.</p><pre><code>{
  "code": "INVITATION_NOT_FOUND"
}</code></pre></div></div><div class="tab-pane" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__get_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul></div></div></div></div></div></div></div><div class="panel panel-white resource-modal"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept"><span class="parent">/agent-client-authorisation/clients/{clientId}/invitations/received/{invitationId}</span>/accept</a> <span class="methods"><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept_put"><span class="badge badge_put">put <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a></span></h4></div><div id="panel_agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept_put'" class="list-group-item"><span class="badge badge_put">put <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Accept an invitation.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept_put"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_put">put <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent">/agent-client-authorisation/clients/{clientId}/invitations/received/{invitationId}</span>/accept</h4></div><div class="modal-body"><div class="alert alert-info"><p>Accept an invitation.</p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>write:received-invitations</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept_put_request" data-toggle="tab">Request</a></li><li><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept_put_response" data-toggle="tab">Response</a></li><li><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept_put_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept_put_request"><h3>URI Parameters</h3><ul><li><strong>clientId</strong>: <em>required (string)</em><p>Client&#39;s top level ID for their MTD registration (not regime specific).</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>client123</code></pre></div></li><li><strong>invitationId</strong>: <em>required (string)</em><p>The id of the invitation.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>5888c22e11000011007afc11</code></pre></div></li></ul><h3>Annotations</h3><ul><li><strong>annotations.scope</strong>:<pre><code>"write:received-invitations"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li></ul></div><div class="tab-pane" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept_put_response"><h2>HTTP status code <a href="http://httpstatus.es/204" target="_blank">204</a></h2><p>Invitation has been accepted.</p><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>The client must be authenticated and authorised (logged-in) to use this resource</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invalidCredentials</strong>:<br>Invalid Authentication information provided.</p><pre><code>{
  "code": "INVALID_CREDENTIALS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>The client is not permitted to reject this invitation, for example because it has already been accepted, rejected or cancelled.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Examples</strong>:</p><div class="examples"><p><strong>saEnrolmentNotFound</strong>:<br>The Client must have an active IR-SA enrolment.</p><pre><code>{
  "code": "SA_ENROLMENT_NOT_FOUND"
}</code></pre><p><strong>clientRegistrationNotFound</strong>:<br>The Client's MTDfB registration was not found.</p><pre><code>{
  "code": "CLIENT_REGISTRATION_NOT_FOUND"
}</code></pre><p><strong>noPermissionOnArn</strong>:<br>The logged in user is not permitted to see the invitations for the specified client.</p><pre><code>{
  "code": "NO_PERMISSION_ON_CLIENT"
}</code></pre><p><strong>invalidInvitationStatus</strong>:<br>The requested state transition is not permitted given the invitation's current status.</p><pre><code>{
  "code": "INVALID_INVITATION_STATUS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/404" target="_blank">404</a></h2><p>The invitation with the specified id does not exist.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invitationNotFound</strong>:<br>The specified invitation was not found.</p><pre><code>{
  "code": "INVITATION_NOT_FOUND"
}</code></pre></div></div><div class="tab-pane" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__accept_put_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul></div></div></div></div></div></div></div><div class="panel panel-white resource-modal"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" href="#panel_agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject"><span class="parent">/agent-client-authorisation/clients/{clientId}/invitations/received/{invitationId}</span>/reject</a> <span class="methods"><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject_put"><span class="badge badge_put">put <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span></a></span></h4></div><div id="panel_agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject" class="panel-collapse collapse"><div class="panel-body"><div class="list-group"><div onclick="window.location.href = '#agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject_put'" class="list-group-item"><span class="badge badge_put">put <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span><div class="method_description"><p>Reject an invitation.</p></div><div class="clearfix"></div></div></div></div></div><div class="modal fade" tabindex="0" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject_put"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel"><span class="badge badge_put">put <span class="glyphicon glyphicon-lock" title="Authentication required"></span></span> <span class="parent">/agent-client-authorisation/clients/{clientId}/invitations/received/{invitationId}</span>/reject</h4></div><div class="modal-body"><div class="alert alert-info"><p>Reject an invitation.</p></div><div class="alert alert-warning"><span class="glyphicon glyphicon-lock" title="Authentication required"></span> Secured by <b>oauth_2_0</b> with scopes:<ul><li>write:received-invitations</li></ul><p>HMRC supports OAuth 2.0 for authenticating User-restricted API requests</p></div><ul class="nav nav-tabs"><li class="active"><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject_put_request" data-toggle="tab">Request</a></li><li><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject_put_response" data-toggle="tab">Response</a></li><li><a href="#agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject_put_securedby" data-toggle="tab">Security</a></li></ul><div class="tab-content"><div class="tab-pane active" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject_put_request"><h3>URI Parameters</h3><ul><li><strong>clientId</strong>: <em>required (string)</em><p>Client&#39;s top level ID for their MTD registration (not regime specific).</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>client123</code></pre></div></li><li><strong>invitationId</strong>: <em>required (string)</em><p>The id of the invitation.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>5888c22e11000011007afc11</code></pre></div></li></ul><h3>Annotations</h3><ul><li><strong>annotations.scope</strong>:<pre><code>"write:received-invitations"</code></pre></li></ul><h3>Headers</h3><ul><li><strong>Accept</strong>: <em>required (string)</em><p>Specifies the version of the API that you want to call. See <a href="/api-documentation/docs/reference-guide#versioning">versioning</a>.</p><p><strong>Example</strong>:</p><div class="examples"><pre><code>application/vnd.hmrc.1.0+json</code></pre></div></li></ul></div><div class="tab-pane" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject_put_response"><h2>HTTP status code <a href="http://httpstatus.es/204" target="_blank">204</a></h2><p>Invitation has been rejected.</p><h2>HTTP status code <a href="http://httpstatus.es/401" target="_blank">401</a></h2><p>The client must be authenticated and authorised (logged-in) to use this resource</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invalidCredentials</strong>:<br>Invalid Authentication information provided.</p><pre><code>{
  "code": "INVALID_CREDENTIALS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/403" target="_blank">403</a></h2><p>The client is not permitted to reject this invitation.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Examples</strong>:</p><div class="examples"><p><strong>saEnrolmentNotFound</strong>:<br>The Client must have an active IR-SA enrolment.</p><pre><code>{
  "code": "SA_ENROLMENT_NOT_FOUND"
}</code></pre><p><strong>clientRegistrationNotFound</strong>:<br>The Client's MTDfB registration was not found.</p><pre><code>{
  "code": "CLIENT_REGISTRATION_NOT_FOUND"
}</code></pre><p><strong>noPermissionOnArn</strong>:<br>The logged in user is not permitted to see the invitations for the specified client.</p><pre><code>{
  "code": "NO_PERMISSION_ON_CLIENT"
}</code></pre><p><strong>invalidInvitationStatus</strong>:<br>The requested state transition is not permitted given the invitation's current status.</p><pre><code>{
  "code": "INVALID_INVITATION_STATUS"
}</code></pre></div><h2>HTTP status code <a href="http://httpstatus.es/404" target="_blank">404</a></h2><p>The invitation with the specified id does not exist.</p><h3>Body</h3><p><strong>Media type</strong>: application/json</p><p><strong>Type</strong>: object</p><strong>Properties</strong><ul><li><strong>code</strong>: <em>required (string)</em></li></ul><p><strong>Example</strong>:</p><div class="examples"><p><strong>invitationNotFound</strong>:<br>The specified invitation was not found.</p><pre><code>{
  "code": "INVITATION_NOT_FOUND"
}</code></pre></div></div><div class="tab-pane" id="agent_client_authorisation_clients__clientid__invitations_received__invitationid__reject_put_securedby"><h1>Secured by oauth_2_0</h1><h3>Headers</h3><ul><li><strong>Authorization</strong>: <em>required (string)</em><p>Used to send a valid OAuth 2 access token</p></li></ul></div></div></div></div></div></div></div></div></div></div></div><div class="col-md-3"><div id="sidebar" class="hidden-print affix" role="complementary"><ul class="nav nav-pills nav-stacked"><li><a href="#agent_client_authorisation_agencies__arn__invitations_sent">/agent-client-authorisation/agencies/{arn}/invitations/sent</a></li><li><a href="#agent_client_authorisation_clients__clientid__invitations_received">/agent-client-authorisation/clients/{clientId}/invitations/received</a></li></ul></div></div></div></div></body></html>